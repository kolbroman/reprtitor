import telebot
from telebot import types
import json
import os
import random
import time


TOKEN = '8404575855:AAHMTeQhO579sdN7zl6J67oVvHlRqsODCyM' 
ADMIN_ID = [671065337] 

DB_FILE = 'users.json'
FEEDBACK_FILE = 'feedback.json' 
CONTENT_FILE = 'content.json' 

bot = telebot.TeleBot(TOKEN)

def load_json(filename, default):
    if not os.path.exists(filename): return default
    try:
        with open(filename, 'r', encoding='utf-8') as f:
            return json.load(f)
    except:
        return default

def save_json(filename, data):
    with open(filename, 'w', encoding='utf-8') as f:
        json.dump(data, f, ensure_ascii=False, indent=4)

bot_content = load_json(CONTENT_FILE, {"theory_data": {}, "cases": {}})
users_db = load_json(DB_FILE, {})

TEST_QUESTIONS = [
    {"q": "–ù–∞ —á–µ–º –æ—Å–Ω–æ–≤–∞–Ω –º–µ—Ö–∞–Ω–∏–∑–º –¥–µ–π—Å—Ç–≤–∏—è —Ç–µ—Ö–Ω–∏–∫–∏ ¬´–¢—Ä–∏ –¥–∞¬ª?", "options": ["–ù–∞ –∂–µ—Å—Ç–∫–æ–º –¥–∞–≤–ª–µ–Ω–∏–∏", "–ù–∞ —Å–æ–∑–¥–∞–Ω–∏–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞ —Å–æ–≥–ª–∞—Å–∏–µ", "–ù–∞ –∑–∞–ø—É—Ç—ã–≤–∞–Ω–∏–∏ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞"], "correct": "–ù–∞ —Å–æ–∑–¥–∞–Ω–∏–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞ —Å–æ–≥–ª–∞—Å–∏–µ"},
    {"q": "–ù–∞ —á–µ–º —Ñ–æ–∫—É—Å–∏—Ä—É–µ—Ç—Å—è –≤–Ω–∏–º–∞–Ω–∏–µ –≤ —Ç–µ—Ö–Ω–∏–∫–µ ¬´–ü—Ä–∏–Ω—Ü–∏–ø–∏–∞–ª¬ª?", "options": ["–ù–∞ –ª–∏—á–Ω—ã—Ö –∫–∞—á–µ—Å—Ç–≤–∞—Ö", "–ù–∞ —ç–º–æ—Ü–∏—è—Ö", "–ù–∞ –∏–Ω—Ç–µ—Ä–µ—Å–∞—Ö, —Ñ–∞–∫—Ç–∞—Ö –∏ –∫—Ä–∏—Ç–µ—Ä–∏—è—Ö"], "correct": "–ù–∞ –∏–Ω—Ç–µ—Ä–µ—Å–∞—Ö, —Ñ–∞–∫—Ç–∞—Ö –∏ –∫—Ä–∏—Ç–µ—Ä–∏—è—Ö"},
    {"q": "–ì–ª–∞–≤–Ω–æ–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ –º–µ—Ç–æ–¥–∞ ¬´–ú–∞–ª–µ–Ω—å–∫–∏–µ —Ö–æ–¥—ã¬ª?", "options": ["–ü–æ–ª—É—á–∏—Ç—å –≤—Å—ë –∏ —Å—Ä–∞–∑—É", "–°–æ–∑–¥–∞–µ—Ç –¥–∏–Ω–∞–º–∏–∫—É –∏ —Å–Ω–∏–∂–∞–µ—Ç —Ä–∏—Å–∫ –æ—Ç–∫–∞–∑–∞", "–ó–∞–ø—É—Ç—ã–≤–∞–µ—Ç –æ–ø–ø–æ–Ω–µ–Ω—Ç–∞"], "correct": "–°–æ–∑–¥–∞–µ—Ç –¥–∏–Ω–∞–º–∏–∫—É –∏ —Å–Ω–∏–∂–∞–µ—Ç —Ä–∏—Å–∫ –æ—Ç–∫–∞–∑–∞"},
    {"q": "–ß—Ç–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏–∑—É–µ—Ç —Ç–µ—Ö–Ω–∏–∫—É ¬´–ò–≥—Ä–∞ –≤ –æ–¥–Ω–∏ –≤–æ—Ä–æ—Ç–∞¬ª?", "options": ["–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª—è –Ω–∞–¥ –ø–æ–≤–µ—Å—Ç–∫–æ–π", "–ü–µ—Ä–µ–¥–∞—á–∞ –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤—ã", "–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤"], "correct": "–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª—è –Ω–∞–¥ –ø–æ–≤–µ—Å—Ç–∫–æ–π"},
    {"q": "–ó–∞–¥–∞—á–∞ –∑–∞–º–µ–Ω—ã ¬´–Ω–µ—Ç¬ª –Ω–∞ ¬´–µ—Å–ª–∏¬ª?", "options": ["–ü—Ä–µ–∫—Ä–∞—Ç–∏—Ç—å –ø–µ—Ä–µ–≥–æ–≤–æ—Ä—ã", "–ü–µ—Ä–µ–≤–µ—Å—Ç–∏ –¥–∏–∞–ª–æ–≥ –≤ –æ–±—Å—É–∂–¥–µ–Ω–∏–µ —É—Å–ª–æ–≤–∏–π", "–ü–æ–∫–∞–∑–∞—Ç—å –±–µ–∑—Ä–∞–∑–ª–∏—á–∏–µ"], "correct": "–ü–µ—Ä–µ–≤–µ—Å—Ç–∏ –¥–∏–∞–ª–æ–≥ –≤ –æ–±—Å—É–∂–¥–µ–Ω–∏–µ —É—Å–ª–æ–≤–∏–π"},
    {"q": "–ß—Ç–æ —è–≤–ª—è–µ—Ç—Å—è –Ω–∞—Ä—É—à–µ–Ω–∏–µ–º —ç—Ç–∏–∫–µ—Ç–∞?", "options": ["–°–ø–æ–∫–æ–π–Ω—ã–π —Ç–æ–Ω", "–†–∞–∑—ä—è—Å–Ω–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π", "–ü–µ—Ä–µ–±–∏–≤–∞–Ω–∏–µ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞"], "correct": "–ü–µ—Ä–µ–±–∏–≤–∞–Ω–∏–µ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞"},
    {"q": "–ö–∞–∫–æ–π —Å–∏–≥–Ω–∞–ª —Ç–µ–ª–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω—Ç–µ—Ä–µ—Å?", "options": ["–†–µ–∑–∫–∏–µ –∂–µ—Å—Ç—ã", "–ù–∞–∫–ª–æ–Ω –∫–æ—Ä–ø—É—Å–∞ –≤–ø–µ—Ä–µ–¥", "–ó–∞–∫—Ä—ã—Ç–∞—è –ø–æ–∑–∞"], "correct": "–ù–∞–∫–ª–æ–Ω –∫–æ—Ä–ø—É—Å–∞ –≤–ø–µ—Ä–µ–¥"},
    {"q": "–ö —á–µ–º—É –ø—Ä–∏–≤–æ–¥–∏—Ç –æ—Ç–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –æ—Ç –ª–∏—á–Ω–æ—Å—Ç–µ–π?", "options": ["–ö —Ä–æ—Å—Ç—É –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è", "–ö —Å–Ω–∏–∂–µ–Ω–∏—é –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏", "–ö —Å–æ–≤–º–µ—Å—Ç–Ω–æ–º—É –ø–æ–∏—Å–∫—É —Ä–µ—à–µ–Ω–∏—è"], "correct": "–ö —Å–æ–≤–º–µ—Å—Ç–Ω–æ–º—É –ø–æ–∏—Å–∫—É —Ä–µ—à–µ–Ω–∏—è"},
    {"q": "–ö–∞–∫–∞—è —Ç–µ—Ö–Ω–∏–∫–∞ —Å–Ω–∏–∂–∞–µ—Ç –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –±–∞—Ä—å–µ—Ä?", "options": ["–¢—Ä–∏ –¥–∞", "–ò–≥—Ä–∞ –≤ –æ–¥–Ω–∏ –≤–æ—Ä–æ—Ç–∞", "–ü—Ä–∏–Ω—Ü–∏–ø–∏–∞–ª"], "correct": "–¢—Ä–∏ –¥–∞"},
    {"q": "–†–∏—Å–∫ —Ç–µ—Ö–Ω–∏–∫–∏ ¬´–ò–≥—Ä–∞ –≤ –æ–¥–Ω–∏ –≤–æ—Ä–æ—Ç–∞¬ª?", "options": ["–ü–æ—Ç–µ—Ä—è –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤—ã", "–ó–∞—Ç—è–≥–∏–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏", "–ó–∞—â–∏—Ç–Ω–∞—è —Ä–µ–∞–∫—Ü–∏—è —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞"], "correct": "–ó–∞—â–∏—Ç–Ω–∞—è —Ä–µ–∞–∫—Ü–∏—è —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞"}
]

PRACTICUM_QUIZ = [
    {"q": "¬´–î–∞–≤–∞–π—Ç–µ –ø–æ–∫–∞ –Ω–µ –±—É–¥–µ–º —Å–ø–æ—Ä–∏—Ç—å –æ —Ñ–∏–Ω–∞–ª—å–Ω–æ–π —Å—É–º–º–µ. –ü—Ä–µ–¥–ª–∞–≥–∞—é –¥–ª—è –Ω–∞—á–∞–ª–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –≥—Ä–∞—Ñ–∏–∫...¬ª", "options": ["–¢—Ä–∏ –¥–∞", "–ú–∞–ª–µ–Ω—å–∫–∏–µ —Ö–æ–¥—ã", "–ü—Ä–∏–Ω—Ü–∏–ø–∏–∞–ª"], "correct": "–ú–∞–ª–µ–Ω—å–∫–∏–µ —Ö–æ–¥—ã"},
    {"q": "¬´–ö–æ–ª–ª–µ–≥–∏, —è —Å–∞–º –±—É–¥—É –º–æ–¥–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –≤—Å—Ç—Ä–µ—á—É. –°–Ω–∞—á–∞–ª–∞ –ø–µ—Ä–≤—ã–π –ø—É–Ω–∫—Ç, –≤–æ–ø—Ä–æ—Å—ã –≤ –∫–æ–Ω—Ü–µ...¬ª", "options": ["–ò–≥—Ä–∞ –≤ –æ–¥–Ω–∏ –≤–æ—Ä–æ—Ç–∞", "–ï—Å–ª–∏ –≤–º–µ—Å—Ç–æ –Ω–µ—Ç", "–Ø–∑—ã–∫ —Ç–µ–ª–∞"], "correct": "–ò–≥—Ä–∞ –≤ –æ–¥–Ω–∏ –≤–æ—Ä–æ—Ç–∞"},
    {"q": "¬´–ú—ã –≥–æ—Ç–æ–≤—ã —Å–Ω–∏–∑–∏—Ç—å —Ü–µ–Ω—É –Ω–∞ 10%, –ï–°–õ–ò –≤—ã –∑–∞–∫–ª—é—á–∏—Ç–µ –¥–æ–≥–æ–≤–æ—Ä –Ω–∞ –¥–≤–∞ –≥–æ–¥–∞...¬ª", "options": ["–¢—Ä–∏ –¥–∞", "–ü—Ä–∏–Ω—Ü–∏–ø–∏–∞–ª", "–ï—Å–ª–∏ –≤–º–µ—Å—Ç–æ –Ω–µ—Ç"], "correct": "–ï—Å–ª–∏ –≤–º–µ—Å—Ç–æ –Ω–µ—Ç"},
    {"q": "¬´–î–∞–≤–∞–π—Ç–µ —É–±–µ—Ä–µ–º —ç–º–æ—Ü–∏–∏ –∏ –ø–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ —Ä—ã–Ω–æ–∫. –í–æ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞—Ä–ø–ª–∞—Ç...¬ª", "options": ["–ú–∞–ª–µ–Ω—å–∫–∏–µ —Ö–æ–¥—ã", "–ü—Ä–∏–Ω—Ü–∏–ø–∏–∞–ª", "–¢—Ä–∏ –¥–∞"], "correct": "–ü—Ä–∏–Ω—Ü–∏–ø–∏–∞–ª"},
    {"q": "¬´–í–∞–º –Ω—Ä–∞–≤–∏—Ç—Å—è –¥–∏–∑–∞–π–Ω? (–î–∞) –£–¥–æ–±–Ω–æ? (–î–∞) –•–æ—Ç–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è? (–î–∞) –¢–æ–≥–¥–∞ –æ—Ñ–æ—Ä–º–ª—è–π—Ç–µ!¬ª", "options": ["–¢—Ä–∏ –¥–∞", "–ò–≥—Ä–∞ –≤ –æ–¥–Ω–∏ –≤–æ—Ä–æ—Ç–∞", "–ú–∞–ª–µ–Ω—å–∫–∏–µ —Ö–æ–¥—ã"], "correct": "–¢—Ä–∏ –¥–∞"}
]

TRAINING_SCENARIOS = {
    "–¢—Ä–∏ –¥–∞": [
        {
            "q": "–°–∏—Ç—É–∞—Ü–∏—è 1: –í—ã —Ö–æ—Ç–∏—Ç–µ –ø—Ä–æ–¥–∞—Ç—å –∫–ª–∏–µ–Ω—Ç—É –¥–æ—Ä–æ–≥—É—é –ø–æ–¥–ø–∏—Å–∫—É. –° —á–µ–≥–æ –Ω–∞—á–Ω–µ—Ç–µ?",
            "options": [
                {"text": "–í–∞–º –≤–µ–¥—å –≤–∞–∂–Ω–æ —Å—ç–∫–æ–Ω–æ–º–∏—Ç—å –≤—Ä–µ–º—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤?", "correct": True, "feedback": "‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: —ç—Ç–æ –æ—á–µ–≤–∏–¥–Ω–∞—è –≤—ã–≥–æ–¥–∞, –∫–ª–∏–µ–Ω—Ç —Å–∫–∞–∂–µ—Ç ¬´–î–∞¬ª"},
                {"text": "–ö—É–ø–∏—Ç–µ –ø–æ–¥–ø–∏—Å–∫—É, –æ–Ω–∞ –æ—á–µ–Ω—å –≤—ã–≥–æ–¥–Ω–∞—è!", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –°–ª–∏—à–∫–æ–º –≤ –ª–æ–±"},
                {"text": "–£ –Ω–∞—Å —Å–µ–π—á–∞—Å –¥–µ–π—Å—Ç–≤—É—é—Ç —Å–∫–∏–¥–∫–∏ –¥–æ –∫–æ–Ω—Ü–∞ –º–µ—Å—è—Ü–∞.", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –ò–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ, –∞ –Ω–µ –≤–æ–≤–ª–µ—á–µ–Ω–∏–µ"}
            ]
        },
        {
            "q": "–°–∏—Ç—É–∞—Ü–∏—è 2: –ö–ª–∏–µ–Ω—Ç –æ—Ç–≤–µ—Ç–∏–ª ¬´–î–∞¬ª. –í–∞—à —Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥?",
            "options": [
                {"text": "–ê –∫–∞—á–µ—Å—Ç–≤–æ —Å–µ—Ä–≤–∏—Å–∞ –∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–±–æ–µ–≤ –¥–ª—è –≤–∞—Å –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ?", "correct": True, "feedback": "‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: –≤—Ç–æ—Ä–æ–µ ¬´–î–∞¬ª"},
                {"text": "–¢–æ–≥–¥–∞ –ø–ª–∞—Ç–∏—Ç–µ –ø–æ —Å—á–µ—Ç—É.", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –†–∞–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∫ –ø—Ä–æ–¥–∞–∂–µ"},
                {"text": "–ù—É —Ç–æ–≥–¥–∞ –æ—Ñ–æ—Ä–º–ª—è–µ–º –¥–æ–≥–æ–≤–æ—Ä?", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –°–ª–∏—à–∫–æ–º —Ä–µ–∑–∫–∏–π –ø–µ—Ä–µ—Ö–æ–¥"}
            ]
        },
        {
            "q": "–°–∏—Ç—É–∞—Ü–∏—è 3: –í—ã –ø—Ä–æ—Å–∏—Ç–µ –Ω–∞—á–∞–ª—å–Ω–∏–∫–∞ –æ—Ç–ø—É—Å—Ç–∏—Ç—å –≤–∞—Å –ø–æ—Ä–∞–Ω—å—à–µ. –ù–∞—á–∞–ª–æ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞:",
            "options": [
                {"text": "–ò–≤–∞–Ω –ò–≤–∞–Ω—ã—á, –º—ã –∂–µ —Å–µ–≥–æ–¥–Ω—è –∑–∞–∫—Ä—ã–ª–∏ –æ—Ç—á–µ—Ç –≤–æ–≤—Ä–µ–º—è?", "correct": True, "feedback": "‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: —Ñ–∞–∫—Ç, —Å –∫–æ—Ç–æ—Ä—ã–º –Ω–µ–ª—å–∑—è —Å–ø–æ—Ä–∏—Ç—å"},
                {"text": "–ú–æ–∂–Ω–æ –º–Ω–µ —Å–µ–≥–æ–¥–Ω—è –¥–æ–º–æ–π –ø–æ—Ä–∞–Ω—å—à–µ?", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –ü—Ä—è–º–∞—è –ø—Ä–æ—Å—å–±–∞, –ª–µ–≥–∫–æ –æ—Ç–∫–∞–∑–∞—Ç—å"},
                {"text": "–Ø —É—Å—Ç–∞–ª, –ø–æ–π–¥—É —è.", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –ù–µ–ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ"}
            ]
        },
        {
            "q": "–°–∏—Ç—É–∞—Ü–∏—è 4: –†–∞–∑–≥–æ–≤–æ—Ä —Å –¥—Ä—É–≥–æ–º. –•–æ—Ç–∏—Ç–µ –ø–æ–π—Ç–∏ –≤ –∫–∏–Ω–æ –Ω–∞ —É–∂–∞—Å—Ç–∏–∫.",
            "options": [
                {"text": "–°–ª—É—à–∞–π, —Ç—ã –∂–µ –ª—é–±–∏—à—å –∏–Ω–æ–≥–¥–∞ –ø–æ—â–µ–∫–æ—Ç–∞—Ç—å —Å–µ–±–µ –Ω–µ—Ä–≤—ã?", "correct": True, "feedback": "‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: –∞–ø–µ–ª–ª—è—Ü–∏—è –∫ –∏–Ω—Ç–µ—Ä–µ—Å–∞–º –¥—Ä—É–≥–∞"},
                {"text": "–ü–æ—à–ª–∏ –Ω–∞ ¬´–ü–∏–ª—É 10¬ª, —Ç–∞–º –∫—Ä—É—Ç–æ!", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –ù–∞–≤—è–∑—ã–≤–∞–Ω–∏–µ —Å–≤–æ–µ–≥–æ –≤–∫—É—Å–∞"},
                {"text": "–ú–Ω–µ —Å–∫—É—á–Ω–æ, –ø–æ—à–ª–∏ –≤ –∫–∏–Ω–æ.", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –≠–≥–æ–∏—Å—Ç–∏—á–Ω–∞—è –ø—Ä–æ—Å—å–±–∞"}
            ]
        },
        {
            "q": "–°–∏—Ç—É–∞—Ü–∏—è 5: –§–∏–Ω–∞–ª—å–Ω—ã–π –∞–∫–∫–æ—Ä–¥. –í—ã –ø–æ–ª—É—á–∏–ª–∏ 2 ¬´–î–∞¬ª. –ö–∞–∫ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å—É—Ç–∏?",
            "options": [
                {"text": "–¢–æ–≥–¥–∞ –ø—Ä–µ–¥–ª–∞–≥–∞—é –≤—ã–±—Ä–∞—Ç—å —ç—Ç–æ—Ç –≤–∞—Ä–∏–∞–Ω—Ç, –æ–Ω –∫–∞–∫ —Ä–∞–∑ —É—á–∏—Ç—ã–≤–∞–µ—Ç –≤—Å—ë –≤—ã—à–µ—Å–∫–∞–∑–∞–Ω–Ω–æ–µ.", "correct": True, "feedback": "‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: –ª–æ–≥–∏—á–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ü–µ–ø–æ—á–∫–∏"},
                {"text": "–ù—É, —Ä–∞–∑ —Ç—ã —Å–æ–≥–ª–∞—Å–µ–Ω, –¥–∞–≤–∞–π —Å–¥–µ–ª–∞–µ–º –∫–∞–∫ —è —Ö–æ—á—É.", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –ó–≤—É—á–∏—Ç –∫–∞–∫ –º–∞–Ω–∏–ø—É–ª—è—Ü–∏—è"},
                {"text": "–ó–Ω–∞—á–∏—Ç, —Ç—ã –æ–±—è–∑–∞–Ω —Å–æ–≥–ª–∞—Å–∏—Ç—å—Å—è.", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –î–∞–≤–ª–µ–Ω–∏–µ"}
            ]
        }
    ],
    "–ï—Å–ª–∏ –≤–º–µ—Å—Ç–æ –Ω–µ—Ç": [
        {
            "q": "–°–∏—Ç—É–∞—Ü–∏—è 1: –ö–ª–∏–µ–Ω—Ç: ¬´–°–¥–µ–ª–∞–π—Ç–µ –Ω–∞–º —Å–∫–∏–¥–∫—É 50%¬ª. –í—ã –Ω–µ –º–æ–∂–µ—Ç–µ –¥–∞—Ç—å —Ç–∞–∫—É—é —Å–∫–∏–¥–∫—É.",
            "options": [
                {"text": "–ú—ã –º–æ–∂–µ–º –æ–±—Å—É–¥–∏—Ç—å —Ç–∞–∫—É—é —Å–∫–∏–¥–∫—É, –µ—Å–ª–∏ –≤—ã –æ–ø–ª–∞—Ç–∏—Ç–µ –∞–±–æ–Ω–µ–º–µ–Ω—Ç –Ω–∞ –≥–æ–¥ –≤–ø–µ—Ä–µ–¥.", "correct": True, "feedback": "‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: —É—Å–ª–æ–≤–∏–µ ¬´win-win¬ª"},
                {"text": "–ù–µ—Ç, —ç—Ç–æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ, —É –Ω–∞—Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ü–µ–Ω—ã.", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –¢—É–ø–∏–∫ –≤ –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–∞—Ö"},
                {"text": "–ú—ã –Ω–µ —Ä–∞–±–æ—Ç–∞–µ–º —Å —Ç–µ–º–∏, –∫—Ç–æ –Ω–µ —Ü–µ–Ω–∏—Ç –Ω–∞—à —Ç—Ä—É–¥.", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –ì—Ä—É–±–æ—Å—Ç—å"}
            ]
        },
        {
            "q": "–°–∏—Ç—É–∞—Ü–∏—è 2: –ù–∞—á–∞–ª—å–Ω–∏–∫: ¬´–í—ã–π–¥–∏ –Ω–∞ —Ä–∞–±–æ—Ç—É –≤ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ¬ª.",
            "options": [
                {"text": "–Ø –≤—ã–π–¥—É –≤ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ, –µ—Å–ª–∏ –ø–æ–ª—É—á—É –æ—Ç–≥—É–ª –≤ –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫.", "correct": True, "feedback": "‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: –æ–±–º–µ–Ω —Ä–µ—Å—É—Ä—Å–∞–º–∏"},
                {"text": "–ù–∏ –∑–∞ —á—Ç–æ, —ç—Ç–æ –º–æ–π –∑–∞–∫–æ–Ω–Ω—ã–π –≤—ã—Ö–æ–¥–Ω–æ–π.", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –ö–æ–Ω—Ñ–ª–∏–∫—Ç"},
                {"text": "–õ–∞–¥–Ω–æ, –≤—ã–π–¥—É, –∫—É–¥–∞ –¥–µ–≤–∞—Ç—å—Å—è...", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –ü–æ–∑–∏—Ü–∏—è –∂–µ—Ä—Ç–≤—ã"}
            ]
        },
        {
            "q": "–°–∏—Ç—É–∞—Ü–∏—è 3: –ó–∞–∫–∞–∑—á–∏–∫: ¬´–ù—É–∂–Ω–æ —Å–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –∑–∞–≤—Ç—Ä–∞ —É—Ç—Ä–æ–º¬ª (–∞ —Ä–µ–∞–ª—å–Ω–æ –Ω—É–∂–Ω–æ 3 –¥–Ω—è).",
            "options": [
                {"text": "–Ø —Å–¥–∞–º –∑–∞–≤—Ç—Ä–∞ —á–µ—Ä–Ω–æ–≤–æ–π –≤–∞—Ä–∏–∞–Ω—Ç, –µ—Å–ª–∏ —Ñ–∏–Ω–∞–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é –º—ã —É—Ç–≤–µ—Ä–¥–∏–º –≤ —Å—Ä–µ–¥—É.", "correct": True, "feedback": "‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–º–æ–∫ –∑–∞–¥–∞—á–∏"},
                {"text": "–ù–µ—Ç, —è —Ñ–∏–∑–∏—á–µ—Å–∫–∏ –Ω–µ —É—Å–ø–µ—é.", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –û—Ç–∫–∞–∑"},
                {"text": "–Ø –ø–æ—Å—Ç–∞—Ä–∞—é—Å—å, –Ω–æ –Ω–µ –æ–±–µ—â–∞—é.", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –ù–µ—É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å"}
            ]
        },
        {
            "q": "–°–∏—Ç—É–∞—Ü–∏—è 4: –ü–æ–∫—É–ø–∞—Ç–µ–ª—å: ¬´–î–æ—Å—Ç–∞–≤—å—Ç–µ –º–Ω–µ —ç—Ç–æ –±–µ—Å–ø–ª–∞—Ç–Ω–æ¬ª.",
            "options": [
                {"text": "–ú—ã –æ—Ñ–æ—Ä–º–∏–º –±–µ—Å–ø–ª–∞—Ç–Ω—É—é –¥–æ—Å—Ç–∞–≤–∫—É, –µ—Å–ª–∏ —Å—É–º–º–∞ –≤–∞—à–µ–≥–æ –∑–∞–∫–∞–∑–∞ –±—É–¥–µ—Ç –æ—Ç 5000 —Ä—É–±–ª–µ–π.", "correct": True, "feedback": "‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: —É—Å–ª–æ–≤–∏–µ"},
                {"text": "–î–æ—Å—Ç–∞–≤–∫–∞ —É –Ω–∞—Å –ø–ª–∞—Ç–Ω–∞—è –¥–ª—è –≤—Å–µ—Ö.", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –ñ–µ—Å—Ç–∫–∏–π –æ—Ç–∫–∞–∑"},
                {"text": "–ò–∑–≤–∏–Ω–∏—Ç–µ, –Ω–æ –Ω–µ—Ç.", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –û–ø—Ä–∞–≤–¥–∞–Ω–∏–µ"}
            ]
        },
        {
            "q": "–°–∏—Ç—É–∞—Ü–∏—è 5: –î—Ä—É–≥ –ø—Ä–æ—Å–∏—Ç –≤ –¥–æ–ª–≥ –±–æ–ª—å—à—É—é —Å—É–º–º—É.",
            "options": [
                {"text": "–Ø –¥–∞–º —Ç–µ–±–µ —ç—Ç—É —Å—É–º–º—É, –µ—Å–ª–∏ –º—ã –Ω–∞–ø–∏—à–µ–º —Ä–∞—Å–ø–∏—Å–∫—É –∏ –∑–∞–≤–µ—Ä–∏–º –µ—ë —É –Ω–æ—Ç–∞—Ä–∏—É—Å–∞.", "correct": True, "feedback": "‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: –∑–∞—â–∏—Ç–∞ —Å–≤–æ–∏—Ö –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤"},
                {"text": "–î–µ–Ω–µ–≥ –Ω–µ—Ç.", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –õ–æ–∂—å –∏–ª–∏ –æ—Ç–∫–∞–∑"},
                {"text": "–ë–µ—Ä–∏, –∫–æ–Ω–µ—á–Ω–æ, –º—ã –∂–µ –¥—Ä—É–∑—å—è. (–†–∏—Å–∫ –ø–æ—Ç–µ—Ä—è—Ç—å –¥–µ–Ω—å–≥–∏)", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –†–∏—Å–∫ –ø–æ—Ç–µ—Ä—è—Ç—å –¥–µ–Ω—å–≥–∏"}
            ]
        }
    ],
    "–ú–∞–ª–µ–Ω—å–∫–∏–µ —Ö–æ–¥—ã": [
        {
            "q": "–°–∏—Ç—É–∞—Ü–∏—è 1: –í—ã —Ö–æ—Ç–∏—Ç–µ –ø—Ä–æ–¥–∞—Ç—å —Å–ª–æ–∂–Ω—ã–π –∫–æ–Ω—Å–∞–ª—Ç–∏–Ω–≥ –∑–∞ 1 –º–ª–Ω —Ä—É–±–ª–µ–π. –° —á–µ–≥–æ –Ω–∞—á–∞—Ç—å?",
            "options": [
                {"text": "–î–∞–≤–∞–π—Ç–µ –Ω–∞—á–Ω–µ–º —Å –ø–ª–∞—Ç–Ω–æ–≥–æ –∞—É–¥–∏—Ç–∞ –≤–∞—à–∏—Ö –ø—Ä–æ–¥–∞–∂ –∑–∞ 10 —Ç—ã—Å. —Ä—É–±–ª–µ–π?", "correct": True, "feedback": "‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: –Ω–∏–∑–∫–∏–π –ø–æ—Ä–æ–≥ –≤—Ö–æ–¥–∞"},
                {"text": "–ö—É–ø–∏—Ç–µ —Å—Ä–∞–∑—É –ø–æ–ª–Ω—ã–π –ø–∞–∫–µ—Ç –∑–∞ –º–∏–ª–ª–∏–æ–Ω, —ç—Ç–æ –æ–∫—É–ø–∏—Ç—Å—è.", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –°–ª–∏—à–∫–æ–º —Ä–∏—Å–∫–æ–≤–∞–Ω–Ω–æ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞"},
                {"text": "–î–∞–≤–∞–π—Ç–µ –≤—Å—Ç—Ä–µ—Ç–∏–º—Å—è –∏ —Å—Ä–∞–∑—É –ø–æ–¥–ø–∏—à–µ–º –¥–æ–≥–æ–≤–æ—Ä.", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –î–∞–≤–ª–µ–Ω–∏–µ"}
            ]
        },
        {
            "q": "–°–∏—Ç—É–∞—Ü–∏—è 2: –ù—É–∂–Ω–æ —É–±–µ–¥–∏—Ç—å —Ä–µ–±–µ–Ω–∫–∞ —É–±—Ä–∞—Ç—å—Å—è –≤–æ –≤—Å–µ–π –∫–æ–º–Ω–∞—Ç–µ.",
            "options": [
                {"text": "–î–∞–≤–∞–π –¥–ª—è –Ω–∞—á–∞–ª–∞ –ø—Ä–æ—Å—Ç–æ —Å–æ–±–µ—Ä–µ–º –≤—Å–µ –∫—É–±–∏–∫–∏ LEGO –≤ –∫–æ—Ä–æ–±–∫—É?", "correct": True, "feedback": "‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: –ø—Ä–æ—Å—Ç–∞—è –∑–∞–¥–∞—á–∞"},
                {"text": "–£–±–µ—Ä–∏—Å—å –≤ –∫–æ–º–Ω–∞—Ç–µ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ!", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –ì–ª–æ–±–∞–ª—å–Ω–∞—è –∑–∞–¥–∞—á–∞, –≤—ã–∑—ã–≤–∞–µ—Ç –ø—Ä–æ—Ç–µ—Å—Ç"},
                {"text": "–ü–æ–∫–∞ –Ω–µ –±—É–¥–µ—Ç —á–∏—Å—Ç–æ, –º—É–ª—å—Ç–∏–∫–æ–≤ –Ω–µ —É–≤–∏–¥–∏—à—å.", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –®–∞–Ω—Ç–∞–∂"}
            ]
        },
        {
            "q": "–°–∏—Ç—É–∞—Ü–∏—è 3: –ö–ª–∏–µ–Ω—Ç —Å–æ–º–Ω–µ–≤–∞–µ—Ç—Å—è –∏ —Ç—è–Ω–µ—Ç –≤—Ä–µ–º—è. –ö–∞–∫ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—å—Å—è?",
            "options": [
                {"text": "–î–∞–≤–∞–π—Ç–µ –æ—Ñ–æ—Ä–º–∏–º —Ç–µ—Å—Ç–æ–≤—ã–π –ø–µ—Ä–∏–æ–¥ –Ω–∞ 3 –¥–Ω—è? –≠—Ç–æ –≤–∞—Å –Ω–∏ –∫ —á–µ–º—É –Ω–µ –æ–±—è–∑—ã–≤–∞–µ—Ç.", "correct": True, "feedback": "‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: —Å–Ω—è—Ç–∏–µ —Å—Ç—Ä–∞—Ö–∞ –æ—à–∏–±–∫–∏"},
                {"text": "–ë–µ—Ä–∏—Ç–µ, –≤—ã —Ç–æ—á–Ω–æ –Ω–µ –ø–æ–∂–∞–ª–µ–µ—Ç–µ.", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –ü—É—Å—Ç—ã–µ —Å–ª–æ–≤–∞"},
                {"text": "–ß—Ç–æ –∏–º–µ–Ω–Ω–æ –≤–∞—Å —Å–º—É—â–∞–µ—Ç? –°–∫–∞–∂–∏—Ç–µ —á–µ—Å—Ç–Ω–æ.", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –ú–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å —Ä–∞–∑–¥—Ä–∞–∂–µ–Ω–∏–µ"}
            ]
        },
        {
            "q": "–°–∏—Ç—É–∞—Ü–∏—è 4: –í—ã –ø—Ä–æ—Å–∏—Ç–µ –ø–æ–≤—ã—à–µ–Ω–∏–µ –∑–∞—Ä–ø–ª–∞—Ç—ã —Å—Ä–∞–∑—É –≤ 2 —Ä–∞–∑–∞.",
            "options": [
                {"text": "–î–∞–≤–∞–π—Ç–µ –ø–æ–≤—ã—Å–∏–º –æ–∫–ª–∞–¥ –Ω–∞ 20% —Å–µ–π—á–∞—Å –∏ –≤–µ—Ä–Ω–µ–º—Å—è –∫ —Ä–∞–∑–≥–æ–≤–æ—Ä—É —á–µ—Ä–µ–∑ –∫–≤–∞—Ä—Ç–∞–ª?", "correct": True, "feedback": "‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: –ø–æ—ç—Ç–∞–ø–Ω—ã–π —Ä–æ—Å—Ç"},
                {"text": "–•–æ—á—É —Ö2 –∏–ª–∏ —è —É–≤–æ–ª—å–Ω—è—é—Å—å.", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –£–ª—å—Ç–∏–º–∞—Ç—É–º"},
                {"text": "–Ø –æ—á–µ–Ω—å –º–Ω–æ–≥–æ —Ä–∞–±–æ—Ç–∞—é, –¥–∞–π—Ç–µ –¥–µ–Ω–µ–≥.", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –ñ–∞–ª–æ–±–∞"}
            ]
        },
        {
            "q": "–°–∏—Ç—É–∞—Ü–∏—è 5: –ù—É–∂–Ω–æ –≤–Ω–µ–¥—Ä–∏—Ç—å –Ω–æ–≤—É—é —Å–ª–æ–∂–Ω—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É –≤ –æ—Ç–¥–µ–ª–µ, —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª—è—é—Ç—Å—è.",
            "options": [
                {"text": "–î–∞–≤–∞–π—Ç–µ –Ω–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ –ø—Ä–æ—Å—Ç–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º—Å—è –∏ –∑–∞–ø–æ–ª–Ω–∏–º –ø—Ä–æ—Ñ–∏–ª–∏.", "correct": True, "feedback": "‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: –ª–µ–≥–∫–∏–π –ø–µ—Ä–≤—ã–π —à–∞–≥"},
                {"text": "–° –∑–∞–≤—Ç—Ä–∞—à–Ω–µ–≥–æ –¥–Ω—è –≤—Å–µ —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ –≤ –Ω–æ–≤–æ–π CRM, –∑–∞ —Å—Ç–∞—Ä—É—é —à—Ç—Ä–∞—Ñ.", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –®–æ–∫-—Ç–µ—Ä–∞–ø–∏—è"},
                {"text": "–≠—Ç–æ –ø—Ä–∏–∫–∞–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞, –Ω–µ –æ–±—Å—É–∂–¥–∞–µ—Ç—Å—è.", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–π —Ä–µ—Å—É—Ä—Å"}
            ]
        }
    ],
    "–ü—Ä–∏–Ω—Ü–∏–ø–∏–∞–ª": [
        {
            "q": "–°–∏—Ç—É–∞—Ü–∏—è 1: –ê—Ä–µ–Ω–¥–æ–¥–∞—Ç–µ–ª—å –ø–æ–¥–Ω–∏–º–∞–µ—Ç —Ü–µ–Ω—É –ø—Ä–æ—Å—Ç–æ ¬´–ø–æ—Ç–æ–º—É —á—Ç–æ —è —Ç–∞–∫ —Ö–æ—á—É¬ª.",
            "options": [
                {"text": "–î–∞–≤–∞–π—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–∏–º —Å—Ä–µ–¥–Ω–∏–µ —Ü–µ–Ω—ã –Ω–∞ –∞—Ä–µ–Ω–¥—É –≤ —ç—Ç–æ–º —Ä–∞–π–æ–Ω–µ –Ω–∞ –ö—É—Ñ–∞—Ä–µ", "correct": True, "feedback": "‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: –æ–ø–æ—Ä–∞ –Ω–∞ —Ä—ã–Ω–æ–∫"},
                {"text": "–≠—Ç–æ –≥—Ä–∞–±–µ–∂! –í—ã –Ω–µ –∏–º–µ–µ—Ç–µ –ø—Ä–∞–≤–∞!", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –≠–º–æ—Ü–∏–∏"},
                {"text": "–ù—É –ª–∞–¥–Ω–æ, —è –±—É–¥—É –ø–ª–∞—Ç–∏—Ç—å...", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –°–¥–∞—á–∞ –ø–æ–∑–∏—Ü–∏–π"}
            ]
        },
        {
            "q": "–°–∏—Ç—É–∞—Ü–∏—è 2: –ö–ª–∏–µ–Ω—Ç –≥–æ–≤–æ—Ä–∏—Ç: ¬´–í–∞—à–∏ —É—Å–ª—É–≥–∏ —Å—Ç–æ—è—Ç –¥–æ—Ä–æ–≥–æ¬ª.",
            "options": [
                {"text": "–î–∞–≤–∞–π—Ç–µ —Å—Ä–∞–≤–Ω–∏–º —Å–º–µ—Ç—É —Å –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–∞–º–∏ –ø—É–Ω–∫—Ç –∑–∞ –ø—É–Ω–∫—Ç–æ–º –∏ –Ω–∞–π–¥–µ–º –æ—Ç–ª–∏—á–∏—è.", "correct": True, "feedback": "‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: —Ñ–∞–∫—Ç—ã –∏ —Ü–∏—Ñ—Ä—ã"},
                {"text": "–ó–∞—Ç–æ —É –Ω–∞—Å –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ –∏ –±—ã—Å—Ç—Ä–æ.", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –°—É–±—ä–µ–∫—Ç–∏–≤–Ω–æ"},
                {"text": "–ù—É, —è –º–æ–≥—É —Å–¥–µ–ª–∞—Ç—å –Ω–µ–±–æ–ª—å—à—É—é —Å–∫–∏–¥–∫—É.", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –¢–æ—Ä–≥ –±–µ–∑ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏—è"}
            ]
        },
        {
            "q": "–°–∏—Ç—É–∞—Ü–∏—è 3: –°–ø–æ—Ä —Å –∫–æ–ª–ª–µ–≥–æ–π, —á—å—è –∏–¥–µ—è –¥–ª—è —Ä–µ–∫–ª–∞–º—ã –ª—É—á—à–µ.",
            "options": [
                {"text": "–î–∞–≤–∞–π—Ç–µ –Ω–µ —Å–ø–æ—Ä–∏—Ç—å, –∞ –æ–ø–∏—Ä–∞—Ç—å—Å—è –Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø—Ä–æ–¥–∞–∂ –ø—Ä–æ—à–ª–æ–π –ø–æ—Ö–æ–∂–µ–π –∞–∫—Ü–∏–∏.", "correct": True, "feedback": "‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: –æ–±—ä–µ–∫—Ç–∏–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ"},
                {"text": "–ú–æ—è –∏–¥–µ—è –ª—É—á—à–µ, –ø–æ—Ç–æ–º—É —á—Ç–æ —è –æ–ø—ã—Ç–Ω–µ–µ —Ç–µ–±—è.", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –ª–∏—á–Ω–æ—Å—Ç–∏"},
                {"text": "–¢—ã –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–Ω–∏–º–∞–µ—à—å –≤ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–µ.", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –û—Å–∫–æ—Ä–±–ª–µ–Ω–∏–µ"}
            ]
        },
        {
            "q": "–°–∏—Ç—É–∞—Ü–∏—è 4: –î–µ–ª–∏—Ç–µ –±—é–¥–∂–µ—Ç. –û–ø–ø–æ–Ω–µ–Ω—Ç —Ö–æ—á–µ—Ç –∑–∞–±—Ä–∞—Ç—å 80% —Å–µ–±–µ.",
            "options": [
                {"text": "–ù–∞ –∫–∞–∫–æ–º –æ—Å–Ω–æ–≤–∞–Ω–∏–∏ –≤—ã –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç–µ —Ç–∞–∫—É—é –ø—Ä–æ–ø–æ—Ä—Ü–∏—é? –î–∞–≤–∞–π—Ç–µ –ø–æ—Å—á–∏—Ç–∞–µ–º –≤–∫–ª–∞–¥ –∫–∞–∂–¥–æ–≥–æ.", "correct": True, "feedback": "‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤"},
                {"text": "–¢–∞–∫ –Ω–µ—á–µ—Å—Ç–Ω–æ, –¥–∞–≤–∞–π –ø–æ–ø–æ–ª–∞–º.", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –ë–∞–∑–∞—Ä–Ω—ã–π —Ç–æ—Ä–≥"},
                {"text": "–ù—É —Ö–æ—Ä–æ—à–æ, –∑–∞–±–∏—Ä–∞–π—Ç–µ.", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –ü—Ä–æ–∏–≥—Ä—ã—à"}
            ]
        },
        {
            "q": "–°–∏—Ç—É–∞—Ü–∏—è 5: –í–∞–º –Ω–∞–≤—è–∑—ã–≤–∞—é—Ç –Ω–µ–≤—ã–≥–æ–¥–Ω—ã–π –ø—É–Ω–∫—Ç –¥–æ–≥–æ–≤–æ—Ä–∞.",
            "options": [
                {"text": "–≠—Ç–æ—Ç –ø—É–Ω–∫—Ç –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—Ç –ì—Ä–∞–∂–¥–∞–Ω—Å–∫–æ–º—É –∫–æ–¥–µ–∫—Å—É (—Å—Ç–∞—Ç—å—è —Ç–∞–∫–∞—è-—Ç–æ).", "correct": True, "feedback": "‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: –æ–ø–æ—Ä–∞ –Ω–∞ –∑–∞–∫–æ–Ω"},
                {"text": "–£–±–µ—Ä–∏—Ç–µ —ç—Ç–æ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ.", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ"},
                {"text": "–ú–Ω–µ —ç—Ç–æ –Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è, –ø–µ—Ä–µ–ø–∏—à–∏—Ç–µ.", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –í–∫—É—Å–æ–≤—â–∏–Ω–∞"}
            ]
        }
    ],
    "–ò–≥—Ä–∞ –≤ –æ–¥–Ω–∏ –≤–æ—Ä–æ—Ç–∞": [
        {
            "q": "–°–∏—Ç—É–∞—Ü–∏—è 1: –ö–ª–∏–µ–Ω—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –ø—Ä–æ—Å–∏—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏ –±–µ—Å–ø–ª–∞—Ç–Ω–æ. ¬´–ù—É –ø–æ–ø—Ä–∞–≤—å—Ç–µ –µ—â–µ —Ç—É—Ç —à—Ä–∏—Ñ—Ç¬ª.",
            "options": [
                {"text": "–Ø —Å–¥–µ–ª–∞–ª —É–∂–µ 5 –ø—Ä–∞–≤–æ–∫ –±–µ—Å–ø–ª–∞—Ç–Ω–æ –≤ —Ä–∞–º–∫–∞—Ö –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏. –í—Å–µ —Å–ª–µ–¥—É—é—â–∏–µ –±—É–¥—É—Ç —Ç–∞—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å—Å—è.", "correct": True, "feedback": "‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –≥—Ä–∞–Ω–∏—Ü"},
                {"text": "–•–æ—Ä–æ—à–æ, —Å–µ–π—á–∞—Å —Å–¥–µ–ª–∞—é.", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –ü–æ–æ—â—Ä–µ–Ω–∏–µ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ —ç–∫—Å—Ç—Ä–µ–º–∏–∑–º–∞"},
                {"text": "–í—ã –Ω–∞–≥–ª–µ–µ—Ç–µ, —Å–∫–æ–ª—å–∫–æ –º–æ–∂–Ω–æ?", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –ö–æ–Ω—Ñ–ª–∏–∫—Ç"}
            ]
        },
        {
            "q": "–°–∏—Ç—É–∞—Ü–∏—è 2: –°–æ–±–µ—Å–µ–¥–Ω–∏–∫ –ø–µ—Ä–µ–±–∏–≤–∞–µ—Ç –∏ –Ω–µ –¥–∞–µ—Ç –≤—Å—Ç–∞–≤–∏—Ç—å —Å–ª–æ–≤–æ.",
            "options": [
                {"text": "–ü–æ–∑–≤–æ–ª—å—Ç–µ, —è –≤–∞—Å –Ω–µ –ø–µ—Ä–µ–±–∏–≤–∞–ª. –î–∞–π—Ç–µ –º–Ω–µ –∑–∞–∫–æ–Ω—á–∏—Ç—å –º—ã—Å–ª—å, –∞ –ø–æ—Ç–æ–º —è –≤—ã—Å–ª—É—à–∞—é –≤–∞—Å.", "correct": True, "feedback": "‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ —É–≤–∞–∂–µ–Ω–∏—è —Ä–µ–≥–ª–∞–º–µ–Ω—Ç–∞"},
                {"text": "(–ú–æ–ª—á–∞—Ç—å –∏ —Ç–µ—Ä–ø–µ—Ç—å)", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –°–¥–∞—á–∞ –ø–æ–∑–∏—Ü–∏–π"},
                {"text": "–ó–∞—Ç–∫–Ω–∏—Å—å –∏ —Å–ª—É—à–∞–π!", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –ê–≥—Ä–µ—Å—Å–∏—è"}
            ]
        },
        {
            "q": "–°–∏—Ç—É–∞—Ü–∏—è 3: –ü–∞—Ä—Ç–Ω–µ—Ä —Ç—Ä–µ–±—É–µ—Ç —É—Å—Ç—É–ø–æ–∫ –ø–æ —Ü–µ–Ω–µ, –Ω–æ –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –≤–∑–∞–º–µ–Ω.",
            "options": [
                {"text": "–ú—ã –∏–¥–µ–º –≤–∞–º –Ω–∞–≤—Å—Ç—Ä–µ—á—É —É–∂–µ —Ç—Ä–µ—Ç–∏–π —Ä–∞–∑. –ì–¥–µ –≤–∞—à–µ –≤—Å—Ç—Ä–µ—á–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ?", "correct": True, "feedback": "‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: –ø—Ä–∏–∑—ã–≤ –∫ –≤–∑–∞–∏–º–Ω–æ—Å—Ç–∏"},
                {"text": "–õ–∞–¥–Ω–æ, —Ç–æ–ª—å–∫–æ –ø–æ–¥–ø–∏—à–∏—Ç–µ —É–∂–µ –¥–æ–≥–æ–≤–æ—Ä.", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –°–¥–∞—á–∞"},
                {"text": "–ù–µ—Ç, –º—ã –±–æ–ª—å—à–µ –Ω–µ —É—Å—Ç—É–ø–∏–º.", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –¢—É–ø–∏–∫ –±–µ–∑ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è"}
            ]
        },
        {
            "q": "–°–∏—Ç—É–∞—Ü–∏—è 4: –í–∞–º –∑–≤–æ–Ω—è—Ç –≤ –Ω–µ—Ä–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è –ø–æ –ø—É—Å—Ç—è–∫–∞–º.",
            "options": [
                {"text": "–Ø —Ü–µ–Ω—é –Ω–∞—à–µ —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ, –Ω–æ –¥–∞–≤–∞–π—Ç–µ –æ–±—Å—É–∂–¥–∞—Ç—å —Ä–∞–±–æ—á–∏–µ –≤–æ–ø—Ä–æ—Å—ã –≤ —Ä–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è.", "correct": True, "feedback": "‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: –≥—Ä–∞–Ω–∏—Ü—ã"},
                {"text": "–î–∞, –∫–æ–Ω–µ—á–Ω–æ, —Å–ª—É—à–∞—é.", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –°–¥–∞—á–∞ –ª–∏—á–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏"},
                {"text": "–ù–µ –∑–≤–æ–Ω–∏—Ç–µ –º–Ω–µ –±–æ–ª—å—à–µ —Ç–∞–∫ –ø–æ–∑–¥–Ω–æ!", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –ò—Å—Ç–µ—Ä–∏–∫–∞"}
            ]
        },
        {
            "q": "–°–∏—Ç—É–∞—Ü–∏—è 5: –û–ø–ø–æ–Ω–µ–Ω—Ç –¥–∞–≤–∏—Ç –Ω–∞ –∂–∞–ª–æ—Å—Ç—å: ¬´–ù—É —Å–¥–µ–ª–∞–π—Ç–µ —Å–∫–∏–¥–∫—É, –≤–∞–º –∂–µ –Ω–µ —Å–ª–æ–∂–Ω–æ¬ª.",
            "options": [
                {"text": "–ú–Ω–µ –Ω–µ —Å–ª–æ–∂–Ω–æ, –Ω–æ –º–æ–µ —Ä–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è —Å—Ç–æ–∏—Ç –¥–µ–Ω–µ–≥. –õ—é–±–∞—è —Ä–∞–±–æ—Ç–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ–ø–ª–∞—á–µ–Ω–∞.", "correct": True, "feedback": "‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: –∑–∞—â–∏—Ç–∞ —Ü–µ–Ω–Ω–æ—Å—Ç–∏"},
                {"text": "–ù—É –ª–∞–¥–Ω–æ...", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –ñ–∞–ª–æ—Å—Ç—å –ø–æ–±–µ–¥–∏–ª–∞"},
                {"text": "–°–ª–æ–∂–Ω–æ! –û—Ç—Å—Ç–∞–Ω—å—Ç–µ.", "correct": False, "feedback": "‚ùå –û—à–∏–±–∫–∞: –ì—Ä—É–±–æ—Å—Ç—å"}
            ]
        }
    ]
}

user_states = {} 

def get_main_keyboard(user_id):
    markup = types.ReplyKeyboardMarkup(resize_keyboard=True, row_width=2)
    user = users_db.get(str(user_id), {'paid': False})
    
    markup.add(types.KeyboardButton("üìö –£—Ä–æ–∫–∏ –ø–æ –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–∞–º"))
    
    if user.get('paid'):
        markup.add(types.KeyboardButton("üõ† –ü—Ä–∞–∫—Ç–∏–∫—É–º"))
        markup.add(types.KeyboardButton("üìù –¢–µ—Å—Ç –ø–æ —Ç–µ–æ—Ä–∏–∏"), types.KeyboardButton("ü§ñ –û—Ç—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ—Ö–Ω–∏–∫"))
    else:
        markup.add(types.KeyboardButton("üí≥ –û–ø–ª–∞—Ç–∞"))
        
    markup.add(types.KeyboardButton("üì© –ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å"))
    return markup

def get_lessons_keyboard():
    markup = types.ReplyKeyboardMarkup(resize_keyboard=True, row_width=2)
    markup.add("üìñ –¢–µ–æ—Ä–∏—è", "üíº –ö–µ–π—Å—ã", "üîô –í –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é")
    return markup

def get_theory_keyboard():
    markup = types.ReplyKeyboardMarkup(resize_keyboard=True, row_width=2)
    topics = list(bot_content['theory_data'].keys())
    markup.add(*topics)
    markup.add("üîô –ù–∞–∑–∞–¥ –∫ —É—Ä–æ–∫–∞–º")
    return markup

def get_cases_keyboard():
    markup = types.ReplyKeyboardMarkup(resize_keyboard=True, row_width=2)
    btns = [types.KeyboardButton(f"üíº {case}") for case in bot_content['cases'].keys()]
    markup.add(*btns)
    markup.add("üîô –ù–∞–∑–∞–¥ –∫ —É—Ä–æ–∫–∞–º")
    return markup

def get_training_menu_keyboard():
    markup = types.ReplyKeyboardMarkup(resize_keyboard=True, row_width=2)
    btns = [types.KeyboardButton(f"‚öîÔ∏è {tech}") for tech in TRAINING_SCENARIOS.keys()]
    btns.append(types.KeyboardButton("üîô –í –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é"))
    markup.add(*btns)
    return markup

def get_options_keyboard(options_list):
    """–°–æ–∑–¥–∞–µ—Ç –∫–Ω–æ–ø–∫–∏ –æ—Ç–≤–µ—Ç–æ–≤ –¥–ª—è —Ç–µ—Å—Ç–æ–≤"""
    markup = types.ReplyKeyboardMarkup(resize_keyboard=True, row_width=1)
    markup.add(*options_list)
    markup.add("üîô –í—ã—Ö–æ–¥ –≤ –º–µ–Ω—é")
    return markup

def send_question(chat_id, user_id, quiz_data, mode_title):
    state = user_states.get(user_id)
    if not state: return

    index = state['index']
    
    if index >= len(quiz_data):
        score = state['score']
        total = len(quiz_data)
        bot.send_message(chat_id, f"üèÅ <b>{mode_title} –∑–∞–≤–µ—Ä—à–µ–Ω!</b>\n–í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç: {score} –∏–∑ {total}.", 
                         reply_markup=get_main_keyboard(user_id), parse_mode="HTML")
        del user_states[user_id]
        return

    question_data = quiz_data[index]
    question_text = question_data['q']

    if state['mode'] == 'training':
        options = [opt['text'] for opt in question_data['options']]
        random.shuffle(options)
    else:
        options = list(question_data['options'])
        random.shuffle(options)

    bot.send_message(chat_id, f"‚ùì <b>–í–æ–ø—Ä–æ—Å {index + 1}/{len(quiz_data)}</b>:\n{question_text}", 
                     reply_markup=get_options_keyboard(options), parse_mode="HTML")

@bot.message_handler(commands=['start'])
def send_welcome(message):
    user_id = str(message.from_user.id)
    if user_id not in users_db:
        users_db[user_id] = {'paid': False, 'username': message.from_user.username, 'payment_requested': False}
        save_json(DB_FILE, users_db)
    
    if message.from_user.id in user_states: 
        del user_states[message.from_user.id]
        
    bot.send_message(message.chat.id, "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –†–µ–ø–µ—Ç–∏—Ç–æ—Ä –ø–æ —Ç–µ—Ö–Ω–∏–∫–∞–º –≤–µ–¥–µ–Ω–∏—è –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–æ–≤!", 
                     reply_markup=get_main_keyboard(message.from_user.id))

@bot.message_handler(commands=['admin'])
def admin_panel(message):
    if message.from_user.id in ADMIN_ID:
        markup = types.ReplyKeyboardMarkup(resize_keyboard=True, row_width=2)
        markup.add("üë• –ó–∞—è–≤–∫–∏ –Ω–∞ –æ–ø–ª–∞—Ç—É", "üì© –°–æ–æ–±—â–µ–Ω–∏—è")
        markup.add("üìù –†–µ–¥. —Ç–µ–æ—Ä–∏—é", "üé¨ –†–µ–¥. –∫–µ–π—Å—ã")
        markup.add("üîô –í—ã—Ö–æ–¥ –∏–∑ –∞–¥–º–∏–Ω–∫–∏")
        bot.send_message(message.chat.id, "üë®‚Äçüíª –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞", reply_markup=markup)

@bot.message_handler(content_types=['text', 'video', 'photo'])
def handle_message(message):
    user_id = message.from_user.id
    user_id_str = str(user_id)
    text = message.text
    state = user_states.get(user_id)

    if text in ["üîô –í—ã—Ö–æ–¥ –≤ –º–µ–Ω—é", "üîô –í –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", "üîô –í—ã—Ö–æ–¥ –∏–∑ –∞–¥–º–∏–Ω–∫–∏"]:
        if user_id in user_states: del user_states[user_id]
        bot.send_message(message.chat.id, "–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", reply_markup=get_main_keyboard(user_id))
        return

    if state:
        mode = state['mode']
        
        if mode == 'test':
            current_q = TEST_QUESTIONS[state['index']]
            if text == current_q['correct']:
                state['score'] += 1
                bot.send_message(message.chat.id, "‚úÖ –í–µ—Ä–Ω–æ!")
            elif text in current_q['options']:
                bot.send_message(message.chat.id, f"‚ùå –û—à–∏–±–∫–∞. –í–µ—Ä–Ω—ã–π –æ—Ç–≤–µ—Ç: {current_q['correct']}")
            else:
                bot.send_message(message.chat.id, "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç –∏–∑ –∫–Ω–æ–ø–æ–∫.")
                return

            state['index'] += 1
            send_question(message.chat.id, user_id, TEST_QUESTIONS, "–¢–µ—Å—Ç")
            return

        if mode == 'practicum':
            current_q = PRACTICUM_QUIZ[state['index']]
            if text == current_q['correct']:
                state['score'] += 1
                bot.send_message(message.chat.id, "‚úÖ –û—Ç–ª–∏—á–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ!")
            elif text in current_q['options']:
                bot.send_message(message.chat.id, f"‚ö†Ô∏è –ù–µ–≤–µ—Ä–Ω–æ. –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞: {current_q['correct']}")
            else:
                bot.send_message(message.chat.id, "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏.")
                return

            state['index'] += 1
            send_question(message.chat.id, user_id, PRACTICUM_QUIZ, "–ü—Ä–∞–∫—Ç–∏–∫—É–º")
            return

        if mode == 'training':
            scenario_name = state['scenario']
            scenario_data = TRAINING_SCENARIOS[scenario_name]
            current_q = scenario_data[state['index']]
            
            selected = next((opt for opt in current_q['options'] if opt['text'] == text), None)
            
            if selected:
                bot.send_message(message.chat.id, selected['feedback'])
                if selected['correct']:
                    state['score'] += 1
                
                state['index'] += 1
                send_question(message.chat.id, user_id, scenario_data, f"–¢—Ä–µ–Ω–∏–Ω–≥: {scenario_name}")
            else:
                bot.send_message(message.chat.id, "–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç –∏–∑ –º–µ–Ω—é.")
            return

        if mode == 'feedback':
            msg_id = str(int(time.time())) + str(random.randint(100,999))
            feedback_entry = {
                'id': msg_id, 
                'user_id': user_id, 
                'username': message.from_user.username or "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ",
                'text': text, 
                'date': time.strftime("%d.%m %H:%M")
            }
            fb_list = load_json(FEEDBACK_FILE, [])
            fb_list.append(feedback_entry)
            save_json(FEEDBACK_FILE, fb_list)
            
            bot.send_message(message.chat.id, "‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É!", reply_markup=get_main_keyboard(user_id))
            for admin in ADMIN_ID:
                try: bot.send_message(admin, f"üîî <b>–ù–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å!</b>\n–û—Ç: @{message.from_user.username}\n–¢–µ–∫—Å—Ç: {text}", parse_mode="HTML")
                except: pass
            
            del user_states[user_id]
            return

        if mode == 'admin_reply' and user_id in ADMIN_ID:
            target_msg_id = state['target_id']
            fb_list = load_json(FEEDBACK_FILE, [])
            target_entry = next((m for m in fb_list if m['id'] == target_msg_id), None)
            
            if target_entry:
                try:
                    bot.send_message(target_entry['user_id'], f"üì© <b>–û—Ç–≤–µ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:</b>\n\n{text}", parse_mode="HTML")
                    bot.send_message(message.chat.id, "‚úÖ –û—Ç–≤–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω.", reply_markup=get_main_keyboard(user_id))
                    fb_list = [m for m in fb_list if m['id'] != target_msg_id]
                    save_json(FEEDBACK_FILE, fb_list)
                except Exception as e:
                    bot.send_message(message.chat.id, f"‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª –±–æ—Ç?): {e}")
            else:
                bot.send_message(message.chat.id, "–°–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ –≤ –±–∞–∑–µ.")
            
            del user_states[user_id]
            admin_panel(message)
            return

        if mode == 'edit_theory_content' and user_id in ADMIN_ID:
            topic = state['topic']
            new_content = message.html_text if hasattr(message, 'html_text') else message.text
            bot_content['theory_data'][topic] = new_content
            save_json(CONTENT_FILE, bot_content)
            bot.send_message(message.chat.id, f"‚úÖ –¢–µ–æ—Ä–∏—è ¬´{topic}¬ª –æ–±–Ω–æ–≤–ª–µ–Ω–∞.", reply_markup=get_main_keyboard(user_id))
            del user_states[user_id]
            admin_panel(message)
            return
            
        if mode == 'edit_case_content' and user_id in ADMIN_ID:
            case_name = state['case_name']
            new_type = 'text'
            new_file_id = None
            new_caption = message.caption or message.text or ""
            
            if message.content_type == 'video':
                new_type = 'video'
                new_file_id = message.video.file_id
            elif message.content_type == 'photo':
                new_type = 'photo'
                new_file_id = message.photo[-1].file_id
            elif message.content_type == 'text':
                pass
            else:
                bot.send_message(message.chat.id, "‚ùå –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¢–µ–∫—Å—Ç, –§–æ—Ç–æ –∏–ª–∏ –í–∏–¥–µ–æ.")
                return

            bot_content['cases'][case_name] = {"type": new_type, "file_id": new_file_id, "caption": new_caption}
            save_json(CONTENT_FILE, bot_content)
            bot.send_message(message.chat.id, f"‚úÖ –ö–µ–π—Å ¬´{case_name}¬ª –æ–±–Ω–æ–≤–ª–µ–Ω.", reply_markup=get_main_keyboard(user_id))
            del user_states[user_id]
            admin_panel(message)
            return

    if not text: return

    if text == "üìù –¢–µ—Å—Ç –ø–æ —Ç–µ–æ—Ä–∏–∏":
        if not users_db.get(user_id_str, {}).get('paid'):
            bot.send_message(message.chat.id, "üîí –î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã.")
            return
        user_states[user_id] = {'mode': 'test', 'index': 0, 'score': 0}
        bot.send_message(message.chat.id, "üöÄ –ù–∞—á–∏–Ω–∞–µ–º —Ç–µ—Å—Ç!", reply_markup=types.ReplyKeyboardRemove())
        send_question(message.chat.id, user_id, TEST_QUESTIONS, "–¢–µ—Å—Ç")

    elif text == "üõ† –ü—Ä–∞–∫—Ç–∏–∫—É–º":
        if not users_db.get(user_id_str, {}).get('paid'):
            bot.send_message(message.chat.id, "üîí –î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã.")
            return
        user_states[user_id] = {'mode': 'practicum', 'index': 0, 'score': 0}
        bot.send_message(message.chat.id, "üöÄ –û–ø—Ä–µ–¥–µ–ª—è–µ–º", reply_markup=types.ReplyKeyboardRemove())
        send_question(message.chat.id, user_id, PRACTICUM_QUIZ, "–ü—Ä–∞–∫—Ç–∏–∫—É–º")

    elif text == "ü§ñ –û—Ç—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ—Ö–Ω–∏–∫":
        if not users_db.get(user_id_str, {}).get('paid'):
            bot.send_message(message.chat.id, "üîí –î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã.")
            return
        bot.send_message(message.chat.id, "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ—Ö–Ω–∏–∫—É:", reply_markup=get_training_menu_keyboard())

    elif text.startswith("‚öîÔ∏è "):
        tech_name = text.replace("‚öîÔ∏è ", "")
        if tech_name in TRAINING_SCENARIOS:
            user_states[user_id] = {'mode': 'training', 'scenario': tech_name, 'index': 0, 'score': 0}
            bot.send_message(message.chat.id, f"–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞: {tech_name}", reply_markup=types.ReplyKeyboardRemove())
            send_question(message.chat.id, user_id, TRAINING_SCENARIOS[tech_name], f"–¢—Ä–µ–Ω–∏–Ω–≥: {tech_name}")

    elif text == "üí≥ –û–ø–ª–∞—Ç–∞":
        markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
        markup.add("‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é –æ–ø–ª–∞—Ç—É", "üîô –í –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é")
        bot.send_message(message.chat.id, "üí≥ –ü–µ—Ä–µ–≤–µ–¥–∏—Ç–µ 20 BYN –Ω–∞ –∫–∞—Ä—Ç—É: 9112 3801 7366 0165 –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–∫—Ä–∏—à–æ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É: @chestachka\n–ó–∞—Ç–µ–º –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.", reply_markup=markup)

    elif text == "‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é –æ–ø–ª–∞—Ç—É":
        users_db[user_id_str]['payment_requested'] = True
        save_json(DB_FILE, users_db)
        bot.send_message(message.chat.id, "‚úÖ –ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞. –û–∂–∏–¥–∞–π—Ç–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∞–¥–º–∏–Ω–∞.", reply_markup=get_main_keyboard(user_id))

    elif text == "üì© –ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å":
        user_states[user_id] = {'mode': 'feedback'}
        bot.send_message(message.chat.id, "–ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å –æ–¥–Ω–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º:", reply_markup=types.ReplyKeyboardMarkup(resize_keyboard=True).add("üîô –í –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é"))

    elif text == "üìö –£—Ä–æ–∫–∏ –ø–æ –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–∞–º": bot.send_message(message.chat.id, "–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–∑–¥–µ–ª:", reply_markup=get_lessons_keyboard())
    elif text == "üìñ –¢–µ–æ—Ä–∏—è": bot.send_message(message.chat.id, "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É:", reply_markup=get_theory_keyboard())
    elif text == "üíº –ö–µ–π—Å—ã": bot.send_message(message.chat.id, "–í—ã–±–µ—Ä–∏—Ç–µ –∫–µ–π—Å:", reply_markup=get_cases_keyboard())
    elif text == "üîô –ù–∞–∑–∞–¥ –∫ —É—Ä–æ–∫–∞–º": bot.send_message(message.chat.id, "–†–∞–∑–¥–µ–ª—ã:", reply_markup=get_lessons_keyboard())

    elif text in bot_content['theory_data']:
        bot.send_message(message.chat.id, bot_content['theory_data'][text], parse_mode="HTML")

    elif text.startswith("üíº "):
        case_name = text.replace("üíº ", "")
        if case_name in bot_content['cases']:
            cdata = bot_content['cases'][case_name]
            caption = cdata.get('caption', '')
            
            try:
                if cdata['type'] == 'video' and cdata['file_id']:
                    bot.send_video(message.chat.id, cdata['file_id'], caption=caption, parse_mode="HTML")
                elif cdata['type'] == 'photo' and cdata['file_id']:
                    bot.send_photo(message.chat.id, cdata['file_id'], caption=caption, parse_mode="HTML")
                else:
                    bot.send_message(message.chat.id, caption, parse_mode="HTML")
            except Exception as e:
                bot.send_message(message.chat.id, f"–û—à–∏–±–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è: {e}\n\n–¢–µ–∫—Å—Ç: {caption}")

    elif text == "üë• –ó–∞—è–≤–∫–∏ –Ω–∞ –æ–ø–ª–∞—Ç—É" and user_id in ADMIN_ID:
        pending = [uid for uid, u in users_db.items() if u.get('payment_requested') and not u.get('paid')]
        if not pending:
            bot.send_message(message.chat.id, "–ó–∞—è–≤–æ–∫ –Ω–µ—Ç.")
        else:
            for uid in pending:
                uname = users_db[uid].get('username', 'Unknown')
                mk = types.InlineKeyboardMarkup()
                mk.add(types.InlineKeyboardButton("‚úÖ –û–¥–æ–±—Ä–∏—Ç—å", callback_data=f"approve_{uid}"))
                bot.send_message(message.chat.id, f"–ó–∞—è–≤–∫–∞ –æ—Ç @{uname} (ID: {uid})", reply_markup=mk)

    elif text == "üì© –°–æ–æ–±—â–µ–Ω–∏—è" and user_id in ADMIN_ID:
        fb_list = load_json(FEEDBACK_FILE, [])
        if not fb_list:
            bot.send_message(message.chat.id, "–°–æ–æ–±—â–µ–Ω–∏–π –Ω–µ—Ç.")
        else:
            markup = types.InlineKeyboardMarkup()
            for msg in fb_list:
                markup.add(types.InlineKeyboardButton(f"{msg['date']} | {msg['username']}", callback_data=f"read_{msg['id']}"))
            bot.send_message(message.chat.id, "–í—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è:", reply_markup=markup)
            
    elif text == "üìù –†–µ–¥. —Ç–µ–æ—Ä–∏—é" and user_id in ADMIN_ID:
        markup = types.InlineKeyboardMarkup()
        for t in bot_content['theory_data']:
            markup.add(types.InlineKeyboardButton(t, callback_data=f"selecttheory_{t}"))
        bot.send_message(message.chat.id, "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:", reply_markup=markup)

    elif text == "üé¨ –†–µ–¥. –∫–µ–π—Å—ã" and user_id in ADMIN_ID:
        markup = types.InlineKeyboardMarkup()
        for c in bot_content['cases']:
            markup.add(types.InlineKeyboardButton(c, callback_data=f"selectcase_{c}"))
        bot.send_message(message.chat.id, "–í—ã–±–µ—Ä–∏—Ç–µ –∫–µ–π—Å –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:", reply_markup=markup)


@bot.callback_query_handler(func=lambda call: True)
def handle_callbacks(call):
    user_id = call.from_user.id
    
    if call.data.startswith("approve_") and user_id in ADMIN_ID:
        uid = call.data.split("_")[1]
        if uid in users_db:
            users_db[uid]['paid'] = True
            users_db[uid]['payment_requested'] = False
            save_json(DB_FILE, users_db)
            bot.edit_message_text(f"‚úÖ –û–ø–ª–∞—Ç–∞ –¥–ª—è {uid} –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞.", call.message.chat.id, call.message.message_id)
            try: bot.send_message(int(uid), "üéâ –û–ø–ª–∞—Ç–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞! –í–∞–º –¥–æ—Å—Ç—É–ø–Ω—ã –¢–µ—Å—Ç—ã –∏ –ü—Ä–∞–∫—Ç–∏–∫—É–º.\n–ù–∞–∂–º–∏—Ç–µ /start –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –º–µ–Ω—é.")
            except: pass

    elif call.data.startswith("read_") and user_id in ADMIN_ID:
        msg_id = call.data.split("_")[1]
        fb_list = load_json(FEEDBACK_FILE, [])
        msg = next((m for m in fb_list if m['id'] == msg_id), None)
        if msg:
            txt = f"üë§ @{msg['username']}\nüìÖ {msg['date']}\n\n{msg['text']}"
            markup = types.InlineKeyboardMarkup()
            markup.add(types.InlineKeyboardButton("‚Ü©Ô∏è –û—Ç–≤–µ—Ç–∏—Ç—å", callback_data=f"reply_{msg_id}"),
                       types.InlineKeyboardButton("üóë –£–¥–∞–ª–∏—Ç—å", callback_data=f"del_{msg_id}"))
            bot.send_message(call.message.chat.id, txt, reply_markup=markup)
        else:
            bot.send_message(call.message.chat.id, "–°–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.")

    elif call.data.startswith("del_") and user_id in ADMIN_ID:
        msg_id = call.data.split("_")[1]
        fb_list = load_json(FEEDBACK_FILE, [])
        fb_list = [m for m in fb_list if m['id'] != msg_id]
        save_json(FEEDBACK_FILE, fb_list)
        bot.delete_message(call.message.chat.id, call.message.message_id)

    elif call.data.startswith("reply_") and user_id in ADMIN_ID:
        msg_id = call.data.split("_")[1]
        user_states[user_id] = {'mode': 'admin_reply', 'target_id': msg_id}
        bot.send_message(call.message.chat.id, "‚úçÔ∏è –ù–∞–ø–∏—à–∏—Ç–µ —Ç–µ–∫—Å—Ç –æ—Ç–≤–µ—Ç–∞:")

    elif call.data.startswith("selecttheory_") and user_id in ADMIN_ID:
        topic = call.data.replace("selecttheory_", "")
        markup = types.InlineKeyboardMarkup()
        markup.add(types.InlineKeyboardButton("üìù –ò–∑–º–µ–Ω–∏—Ç—å —Ç–µ–∫—Å—Ç", callback_data=f"edittheory_{topic}"))
        bot.send_message(call.message.chat.id, f"–¢–µ–º–∞: {topic}", reply_markup=markup)

    elif call.data.startswith("edittheory_"):
        topic = call.data.replace("edittheory_", "")
        user_states[user_id] = {'mode': 'edit_theory_content', 'topic': topic}
        bot.send_message(call.message.chat.id, f"–ü—Ä–∏—à–ª–∏—Ç–µ –Ω–æ–≤—ã–π —Ç–µ–∫—Å—Ç –¥–ª—è ¬´{topic}¬ª:")

    elif call.data.startswith("selectcase_") and user_id in ADMIN_ID:
        case_name = call.data.replace("selectcase_", "")
        markup = types.InlineKeyboardMarkup()
        markup.add(types.InlineKeyboardButton("üìù –ò–∑–º–µ–Ω–∏—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç", callback_data=f"editcase_{case_name}"))
        bot.send_message(call.message.chat.id, f"–ö–µ–π—Å: {case_name}", reply_markup=markup)

    elif call.data.startswith("editcase_"):
        case_name = call.data.replace("editcase_", "")
        user_states[user_id] = {'mode': 'edit_case_content', 'case_name': case_name}
        bot.send_message(call.message.chat.id, f"–ü—Ä–∏—à–ª–∏—Ç–µ —Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ/—Ç–µ–∫—Å—Ç –¥–ª—è ¬´{case_name}¬ª:")

if __name__ == '__main__':
    print("–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω...")
    bot.infinity_polling(skip_pending=True)